<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"></script>
    <title>jsonp 跨域请求数据</title>
</head>
<body>
<h1>jsonp 跨域请求 json 数据</h1><button id="js">jsonp</button>
<script>
    /* $.ajax({
        // 请求另一个服务器的后端数据
        url: "http://s.chinahadoop.cn/js/jsonp/jsonp.php",
        type: "get",
        dataType: "jsonp",
        jsonp: "callback",
        jsonpCallback: "getMessage",
        success:function(data){
            console.log(data)
        },
        error:function(){
            alert('发生异常!')
        }
    }) */

    function getMessage(data){
        console.log(data)
    }

    document.querySelector('#js').onclick = function(){
        var url = "http://s.chinahadoop.cn/js/jsonp/jsonp.php?callback=getMessage";
        var script = document.createElement('script');
        script.setAttribute('src', url);
        document.getElementsByTagName('body')[0].appendChild(script);
    }


    //    $.ajax('./jsonp.php?callback=getMessage',function(res){
    //        console.log(res)
    //    })
    function getMessage(data){
        alert(data.msg)
    }
</script>
</body>
</html>
